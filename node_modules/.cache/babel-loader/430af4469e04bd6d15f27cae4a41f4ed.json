{"ast":null,"code":"var _jsxFileName = \"D:\\\\MyProjects\\\\Technomoles\\\\LeisureGuruFE\\\\src\\\\components\\\\Main.js\",\n    _s = $RefreshSig$();\n\nimport { useContext, useEffect, useState } from \"react\";\nimport { Rating } from \"./filters/Rating\";\nimport { Activities } from \"./filters/Activities\";\nimport { PlaceComponent } from \"./PlaceComponent\";\nimport { Date } from \"./filters/Date\";\nimport { AlertComponent } from \"./AlertComponent\";\nimport { SearchContext } from \"./context/SearchContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const Main = function (props) {\n  _s();\n\n  const input = props.setSearchString;\n  const [rating, setRating] = useState(5);\n  const [date, setDate] = useState(0);\n  const [searchString, setSearchString] = useState(input);\n  const [selectedActivities, setSelectedActivities] = useState(new Array());\n  const searchContext = useContext(SearchContext);\n  var credentials = btoa(localStorage.getItem(\"email\") + \":\" + localStorage.getItem(\"password\"));\n  const [info, setInfo] = useState([]); // create useState for info thet we GET from db\n\n  useEffect(() => {\n    const getInformation = async () => {\n      const conn = await fetch('http://127.0.0.1:5000/homepage'); //create connection with db\n\n      const getdata = await conn.json();\n      setInfo(getdata);\n    };\n\n    getInformation();\n  }, []);\n  useEffect(() => {\n    console.log(\"filter changed \" + rating + \", \" + date + \", \" + selectedActivities);\n    console.log(credentials);\n    var auth = {\n      \"Authorization\": `Basic ${credentials}`\n    };\n    fetch('http://127.0.0.1:5000/filter', {\n      method: 'POST',\n      headers: {\n        'Authorization': `Basic ${credentials}`,\n        'Content-Type': 'application/json'\n      },\n      mode: 'cors',\n      body: JSON.stringify({\n        rate: rating,\n        activities: selectedActivities\n      })\n    }).then(response => {\n      if (response.status >= 400) {\n        throw Error(400);\n      } else {\n        return response;\n      }\n    }).then(response => response.json()).then(jsonResponse => {\n      return setInfo(jsonResponse);\n    }).catch(e => console.log(\"failed: \" + e));\n  }, [rating, date, selectedActivities]);\n  useEffect(() => {\n    console.log(\"input!\" + searchContext.searchString);\n    fetch(`http://127.0.0.1:5000/filter`, {\n      method: 'POST',\n      headers: {\n        'Authorization': `Basic ${credentials}`,\n        'Content-Type': 'application/json'\n      },\n      mode: 'cors',\n      body: JSON.stringify({\n        search_box: searchContext.searchString\n      })\n    }).then(response => response.json()).then(respData => {\n      setInfo(respData);\n    }).catch(e => console.log(\"failed: \" + e));\n  }, [searchContext.searchString]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"wrapper\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"left-panel\",\n      children: [/*#__PURE__*/_jsxDEV(Rating, {\n        setRating: setRating\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Activities, {\n        selectedActivities: selectedActivities,\n        setSelectedActivities: setSelectedActivities\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Date, {\n        date: date,\n        setDate: setDate\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"main-panel\",\n      children: /*#__PURE__*/_jsxDEV(\"ul\", {\n        style: {\n          display: 'block'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"li\", {\n          style: {\n            display: 'inline-block'\n          },\n          children: info.map(infoIndex => /*#__PURE__*/_jsxDEV(PlaceComponent, {\n            id: infoIndex.id,\n            name: infoIndex.name,\n            image: infoIndex.image,\n            description: infoIndex.description,\n            rate: infoIndex.rate,\n            country: infoIndex.country,\n            city: infoIndex.city,\n            authorized: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 25\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(AlertComponent, {\n        authorized: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 92,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Main, \"YUCwpaTRj1yJY/rM+PUAXyRFc7A=\");\n\n_c = Main;\n\nvar _c;\n\n$RefreshReg$(_c, \"Main\");","map":{"version":3,"names":["useContext","useEffect","useState","Rating","Activities","PlaceComponent","Date","AlertComponent","SearchContext","Main","props","input","setSearchString","rating","setRating","date","setDate","searchString","selectedActivities","setSelectedActivities","Array","searchContext","credentials","btoa","localStorage","getItem","info","setInfo","getInformation","conn","fetch","getdata","json","console","log","auth","method","headers","mode","body","JSON","stringify","rate","activities","then","response","status","Error","jsonResponse","catch","e","search_box","respData","display","map","infoIndex","id","name","image","description","country","city"],"sources":["D:/MyProjects/Technomoles/LeisureGuruFE/src/components/Main.js"],"sourcesContent":["import { useContext, useEffect, useState } from \"react\";\r\nimport { Rating } from \"./filters/Rating\";\r\nimport { Activities } from \"./filters/Activities\";\r\nimport {PlaceComponent} from \"./PlaceComponent\"\r\nimport { Date } from \"./filters/Date\";\r\n\r\nimport {AlertComponent} from \"./AlertComponent\"\r\nimport { SearchContext } from \"./context/SearchContext\";\r\n\r\nexport const Main = function (props) {\r\n    const input = props.setSearchString;\r\n    const [rating, setRating] = useState(5);\r\n    const [date, setDate] = useState(0);\r\n    const [searchString, setSearchString] = useState(input);\r\n    const [selectedActivities, setSelectedActivities] = useState(\r\n        new Array()\r\n    );\r\n    const searchContext = useContext(SearchContext);\r\n\r\n    var credentials = btoa(localStorage.getItem(\"email\") + \":\" + localStorage.getItem(\"password\"))\r\n\r\n\r\n    const [info, setInfo] = useState([]);// create useState for info thet we GET from db\r\n    useEffect(()=>{\r\n        const getInformation = async() => {\r\n            const conn = await fetch('http://127.0.0.1:5000/homepage'); //create connection with db\r\n            const getdata = await conn.json();            \r\n            setInfo(getdata);\r\n        }\r\n        getInformation();\r\n    },[]);\r\n\r\n    useEffect( () => {\r\n        console.log(\"filter changed \" + rating + \", \" + date + \", \" + selectedActivities);\r\n       \r\n        console.log(credentials)\r\n        var auth = { \"Authorization\" : `Basic ${credentials}` }\r\n        fetch('http://127.0.0.1:5000/filter', {\r\n            method: 'POST',\r\n            headers: { \r\n                        'Authorization' : `Basic ${credentials}`,\r\n                        'Content-Type': 'application/json'\r\n                      },\r\n            mode: 'cors',\r\n            body: JSON.stringify(\r\n                {\r\n                    rate: rating,\r\n                    activities: selectedActivities,\r\n                }\r\n            )\r\n        })\r\n        .then(response => {\r\n            if (response.status >= 400) {\r\n                throw Error(400);\r\n            } else {\r\n                return response;\r\n            }\r\n        })\r\n        .then(response => response.json())\r\n        .then(jsonResponse => {\r\n            return setInfo(jsonResponse);\r\n        })\r\n        .catch(e => console.log(\"failed: \" + e));\r\n    }, [rating, date, selectedActivities]\r\n\r\n    );\r\n\r\n    useEffect(() => {\r\n        console.log(\"input!\" + searchContext.searchString)\r\n        fetch(`http://127.0.0.1:5000/filter`, {\r\n            method: 'POST',\r\n                headers: { \r\n                            'Authorization' : `Basic ${credentials}`,\r\n                            'Content-Type': 'application/json'\r\n                        },\r\n                mode: 'cors',\r\n        \r\n            body: JSON.stringify(\r\n            {\r\n                search_box: searchContext.searchString\r\n            }\r\n            )\r\n        })\r\n            .then(response => response.json())\r\n            .then(respData => {\r\n                setInfo(respData)\r\n            })\r\n            .catch(e => console.log(\"failed: \" + e));\r\n    }, [searchContext.searchString]);\r\n\r\n    return (\r\n        <div className=\"wrapper\">\r\n            <div className=\"left-panel\">\r\n                <Rating setRating={setRating} />\r\n                <Activities selectedActivities={selectedActivities} setSelectedActivities={setSelectedActivities}/>\r\n                <Date date={date} setDate={setDate}/>\r\n\r\n            </div>\r\n            <div className=\"main-panel\">\r\n            <ul style = {{display:'block'}}>\r\n                <li style = {{display:'inline-block'}}>\r\n\r\n                {\r\n                    info.map((infoIndex)=>(\r\n                        <PlaceComponent \r\n                        id={infoIndex.id}\r\n                        name={infoIndex.name} \r\n                        image={infoIndex.image} \r\n                        description={infoIndex.description} \r\n                        rate={infoIndex.rate} \r\n                        country={infoIndex.country}\r\n                        city={infoIndex.city}\r\n                        authorized = {true}/>\r\n                    ))\r\n\r\n                }\r\n                    \r\n                </li>\r\n            </ul>\r\n            </div>\r\n            <div>\r\n                <AlertComponent authorized={true}/>\r\n            </div>\r\n            \r\n            \r\n        </div>\r\n    );\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}