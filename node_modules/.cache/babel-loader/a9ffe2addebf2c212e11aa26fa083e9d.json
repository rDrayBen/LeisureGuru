{"ast":null,"code":"import _slicedToArray from\"D:/MyProjects/Technomoles/LeisureGuruFE/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{setSelectionRange}from\"@testing-library/user-event/dist/utils\";import{useEffect,useState,history,location,useRef}from\"react\";import{json,redirect,useNavigate}from'react-router-dom';import{Link}from\"react-router-dom\";import{Button,Modal,ModalHeader,ModalBody,ModalFooter}from'reactstrap';import'bootstrap/dist/css/bootstrap.min.css';import{ProfileStrings}from'./ProfileStrings';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var Profile=function Profile(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),serverEror=_useState2[0],setServerError=_useState2[1];var navigate=useNavigate();var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),modal=_useState4[0],setModal=_useState4[1];var toggle=function toggle(){return setModal(!modal);};//const id = 0;\nvar credentials=btoa(localStorage.getItem(\"email\")+\":\"+localStorage.getItem(\"password\"));//console.log(credentials)\nvar auth={\"Authorization\":\"Basic \".concat(credentials)};var id=localStorage.getItem(\"id\");var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),profileData=_useState6[0],setProfileData=_useState6[1];//  const id = 0;\nfunction LogOut(){fetch(\"http://127.0.0.1:5000/profile/logout/\".concat(id),{method:'GET',headers:auth,mode:'cors'}).then(function(response){if(response.status>=200&&response.status<=299){localStorage.clear();setServerError('');navigate(\"/\");}else if(response.status>=400){setServerError('Bad Request');}});navigate(\"/profile\");}var toggleYes=function toggleYes(){setModal(!modal);fetch('http://127.0.0.1:5000/profile/'+localStorage.getItem(\"id\"),{method:'DELETE',headers:auth,mode:'cors'}).then(function(response){if(response.status>=200&&response.status<=299){localStorage.clear();setServerError('');navigate(\"/\");}else if(response.status>=400){setServerError('Bad Request');}else{setServerError('Unknown error');navigate(\"/profile\");}});};// function GetInfo(){\n//     fetch(`http://127.0.0.1:5000/profile/${id}`,  {\n//         method: 'GET',\n//         headers : auth,\n//         mode:'cors'\n//     })\n//     .then(response => response.json())\n//     .then(respData => {\n//         setProfileData(respData);\n//     }\n//     )\n//     .then((response) => {\n//      if (response.status === 200) {\n//         setServerError('')\n//      } else if (response.status > 200) {\n//         setServerError('Bad Request')\n//      } \n//     })\n//     .catch(e => console.log(\"failed: \" + e));\n// }\n// GetInfo();\nuseEffect(function(){// var credentials = btoa(localStorage.getItem(\"email\") + \":\" + localStorage.getItem(\"password\"))\n// var auth = { \"Authorization\" : `Basic ${credentials}` }\n// let id = localStorage.getItem(\"id\")\n// fetch(`http://127.0.0.1:5000/profile/${id}`,  {\n//     method: 'GET',\n//     headers : auth,\n//     mode:'cors'\n// })\n// .then(response => response.json())\n// .then(respData => setProfileData(respData))\n// .catch(e => console.log(\"failed: \" + e));\nfunction GetInfo(){fetch(\"http://127.0.0.1:5000/profile/\".concat(id),{method:'GET',headers:auth,mode:'cors'}).then(function(response){return response.json();}).then(function(respData){setProfileData(respData);}).then(function(response){if(response.status===200){setServerError('');}else if(response.status>200){setServerError('Bad Request');}}).catch(function(e){return console.log(\"failed: \"+e);});};GetInfo();},[]);return/*#__PURE__*/_jsx(\"main\",{children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"forma\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"img\",{className:\"userImage\",src:profileData.photo||\"https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460__340.png\",alt:\"Your profile picture\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"personData\",children:/*#__PURE__*/_jsx(ProfileStrings,{profData:profileData})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"listWrapper\",children:/*#__PURE__*/_jsxs(\"ul\",{role:\"tablist\",className:\"tblist\",children:[/*#__PURE__*/_jsx(\"li\",{className:\"nav-item\",children:/*#__PURE__*/_jsx(Link,{className:\"editProfile\",to:\"/editprofile\",id:\"home-tab\",\"data-toggle\":\"tab\",role:\"tab\",children:\"Edit profile\"})}),/*#__PURE__*/_jsx(\"li\",{className:\"nav-item\",children:/*#__PURE__*/_jsx(Link,{className:\"settings\",to:\"/settings\",id:\"profile-tab\",\"data-toggle\":\"tab\",href:\"#\",role:\"tab\",children:\"Settings\"})}),/*#__PURE__*/_jsx(\"li\",{className:\"nav-item\",children:/*#__PURE__*/_jsx(Link,{className:\"logOut\",to:\"/\",onClick:LogOut,children:\"Log out \"})})]})})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{className:\"deleteButton\",onClick:toggle,children:\"Delete my account\"}),/*#__PURE__*/_jsxs(Modal,{isOpen:modal,toggle:toggle,children:[/*#__PURE__*/_jsx(ModalHeader,{toggle:toggle,children:\"Delete my account\"}),/*#__PURE__*/_jsx(ModalBody,{children:\"Do you want to delete your account on LeisureGuru?\"}),/*#__PURE__*/_jsxs(ModalFooter,{children:[/*#__PURE__*/_jsx(Button,{color:\"danger\",onClick:toggleYes,children:\"Delete\"}),' ',/*#__PURE__*/_jsx(Button,{color:\"secondary\",onClick:toggle,children:\"Cancel\"})]})]})]})]})})});};","map":{"version":3,"names":["setSelectionRange","useEffect","useState","history","location","useRef","json","redirect","useNavigate","Link","Button","Modal","ModalHeader","ModalBody","ModalFooter","ProfileStrings","Profile","serverEror","setServerError","navigate","modal","setModal","toggle","credentials","btoa","localStorage","getItem","auth","id","profileData","setProfileData","LogOut","fetch","method","headers","mode","then","response","status","clear","toggleYes","GetInfo","respData","catch","e","console","log","photo"],"sources":["D:/MyProjects/Technomoles/LeisureGuruFE/src/components/Profile.js"],"sourcesContent":["import { setSelectionRange } from \"@testing-library/user-event/dist/utils\";\r\nimport { useEffect, useState, history, location, useRef } from \"react\";\r\nimport { json, redirect, useNavigate } from 'react-router-dom';\r\nimport { Link} from \"react-router-dom\";\r\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport {ProfileStrings} from './ProfileStrings'\r\n\r\n\r\nexport const Profile = function () {\r\n    const[serverEror, setServerError] = useState('');\r\n    const navigate = useNavigate();\r\n    const [modal, setModal] = useState(false);\r\n    const toggle = () => setModal(!modal);\r\n\r\n\r\n    \r\n    //const id = 0;\r\n\r\n    var credentials = btoa(localStorage.getItem(\"email\") + \":\" + localStorage.getItem(\"password\"))\r\n    //console.log(credentials)\r\n    var auth = { \"Authorization\" : `Basic ${credentials}` }\r\n    let id = localStorage.getItem(\"id\")\r\n    const[profileData, setProfileData] = useState({})\r\n  //  const id = 0;\r\n    function LogOut(){\r\n       \r\n        fetch(`http://127.0.0.1:5000/profile/logout/${id}`,  {\r\n            method: 'GET',\r\n            headers : auth,\r\n            mode:'cors'\r\n        })\r\n        .then((response) => {\r\n         if (response.status >= 200 && response.status <= 299) {\r\n\r\n            localStorage.clear()\r\n            setServerError('')\r\n            navigate(\"/\");\r\n         } else if (response.status >= 400) {\r\n            setServerError('Bad Request')\r\n         } \r\n        })\r\n      navigate(\"/profile\");\r\n    }\r\n    \r\n    const toggleYes = () =>{\r\n        setModal(!modal);\r\n        fetch('http://127.0.0.1:5000/profile/' + localStorage.getItem(\"id\"), {\r\n            method: 'DELETE',\r\n            headers : auth,\r\n            mode:'cors' \r\n        })\r\n        .then((response) => {\r\n            if (response.status >= 200 && response.status <= 299) {\r\n                localStorage.clear();\r\n                setServerError('')\r\n                navigate(\"/\");\r\n            } else if (response.status >= 400) {\r\n                setServerError('Bad Request')\r\n            } else{\r\n                setServerError('Unknown error')\r\n                navigate(\"/profile\");\r\n            }\r\n        })\r\n        \r\n    }\r\n\r\n    // function GetInfo(){\r\n    //     fetch(`http://127.0.0.1:5000/profile/${id}`,  {\r\n    //         method: 'GET',\r\n    //         headers : auth,\r\n    //         mode:'cors'\r\n    //     })\r\n    //     .then(response => response.json())\r\n    //     .then(respData => {\r\n    //         setProfileData(respData);\r\n    //     }\r\n    //     )\r\n    //     .then((response) => {\r\n    //      if (response.status === 200) {\r\n    //         setServerError('')\r\n    //      } else if (response.status > 200) {\r\n    //         setServerError('Bad Request')\r\n    //      } \r\n    //     })\r\n    //     .catch(e => console.log(\"failed: \" + e));\r\n    // }\r\n    // GetInfo();\r\n\r\n    useEffect(()=>{\r\n        // var credentials = btoa(localStorage.getItem(\"email\") + \":\" + localStorage.getItem(\"password\"))\r\n        // var auth = { \"Authorization\" : `Basic ${credentials}` }\r\n        // let id = localStorage.getItem(\"id\")\r\n        // fetch(`http://127.0.0.1:5000/profile/${id}`,  {\r\n        //     method: 'GET',\r\n        //     headers : auth,\r\n        //     mode:'cors'\r\n        // })\r\n        // .then(response => response.json())\r\n        // .then(respData => setProfileData(respData))\r\n        // .catch(e => console.log(\"failed: \" + e));\r\n        function GetInfo(){\r\n            fetch(`http://127.0.0.1:5000/profile/${id}`,  {\r\n                method: 'GET',\r\n                headers : auth,\r\n                mode:'cors'\r\n            })\r\n            .then(response => response.json())\r\n            .then(respData => {\r\n                setProfileData(respData);\r\n            }\r\n            )\r\n            .then((response) => {\r\n             if (response.status === 200) {\r\n                setServerError('')\r\n             } else if (response.status > 200) {\r\n                setServerError('Bad Request')\r\n             } \r\n            })\r\n            .catch(e => console.log(\"failed: \" + e));\r\n        };\r\n        GetInfo();\r\n    }, []);\r\n\r\n    return (\r\n    <main>\r\n        <div >\r\n            <div className=\"forma\"> \r\n                <div >\r\n                    <div>\r\n                        <img className = \"userImage\" src= {profileData.photo || \"https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460__340.png\"} alt = \"Your profile picture\"></img>\r\n                    </div>    \r\n                    <div className=\"personData\">\r\n                        <ProfileStrings\r\n                            profData={profileData}\r\n                        />\r\n                    </div>\r\n                    <div >\r\n                        <div className=\"listWrapper\" >\r\n                            <ul role = \"tablist\" className=\"tblist\">\r\n                                <li className = \"nav-item\">\r\n                                    <Link className = \"editProfile\"  to= '/editprofile' id = \"home-tab\" data-toggle = \"tab\"  role = \"tab\">Edit profile</Link>\r\n                                </li>\r\n                                <li className = \"nav-item\">\r\n                                    <Link className = \"settings\"  to='/settings' id = \"profile-tab\" data-toggle = \"tab\" href = \"#\" role = \"tab\">Settings</Link>\r\n                                </li>\r\n                                <li className = \"nav-item\">\r\n                                    <Link className = \"logOut\" to = \"/\" onClick={LogOut}>Log out </Link>\r\n                                </li>\r\n                            </ul>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                \r\n                <div>\r\n                    <button className = \"deleteButton\" onClick={toggle}>\r\n                        Delete my account\r\n                    </button>\r\n                    \r\n                    <Modal isOpen={modal} toggle={toggle}>\r\n                        <ModalHeader toggle={toggle}>Delete my account</ModalHeader>\r\n                            <ModalBody>\r\n                                Do you want to delete your account on LeisureGuru?\r\n                            </ModalBody>\r\n                        <ModalFooter>\r\n                            <Button color=\"danger\" onClick={toggleYes}>\r\n                                Delete\r\n                            </Button>{' '}\r\n                            <Button color=\"secondary\" onClick={toggle}>\r\n                                Cancel\r\n                            </Button>\r\n                        </ModalFooter>\r\n                    </Modal>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </main>\r\n    );\r\n}\r\n"],"mappings":"6HAAA,OAASA,iBAAT,KAAkC,wCAAlC,CACA,OAASC,SAAT,CAAoBC,QAApB,CAA8BC,OAA9B,CAAuCC,QAAvC,CAAiDC,MAAjD,KAA+D,OAA/D,CACA,OAASC,IAAT,CAAeC,QAAf,CAAyBC,WAAzB,KAA4C,kBAA5C,CACA,OAASC,IAAT,KAAoB,kBAApB,CACA,OAASC,MAAT,CAAiBC,KAAjB,CAAwBC,WAAxB,CAAqCC,SAArC,CAAgDC,WAAhD,KAAmE,YAAnE,CACA,MAAO,sCAAP,CACA,OAAQC,cAAR,KAA6B,kBAA7B,C,wFAGA,MAAO,IAAMC,QAAO,CAAG,QAAVA,QAAU,EAAY,CAC/B,cAAoCd,QAAQ,CAAC,EAAD,CAA5C,wCAAMe,UAAN,eAAkBC,cAAlB,eACA,GAAMC,SAAQ,CAAGX,WAAW,EAA5B,CACA,eAA0BN,QAAQ,CAAC,KAAD,CAAlC,yCAAOkB,KAAP,eAAcC,QAAd,eACA,GAAMC,OAAM,CAAG,QAATA,OAAS,SAAMD,SAAQ,CAAC,CAACD,KAAF,CAAd,EAAf,CAIA;AAEA,GAAIG,YAAW,CAAGC,IAAI,CAACC,YAAY,CAACC,OAAb,CAAqB,OAArB,EAAgC,GAAhC,CAAsCD,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAvC,CAAtB,CACA;AACA,GAAIC,KAAI,CAAG,CAAE,gCAA2BJ,WAA3B,CAAF,CAAX,CACA,GAAIK,GAAE,CAAGH,YAAY,CAACC,OAAb,CAAqB,IAArB,CAAT,CACA,eAAqCxB,QAAQ,CAAC,EAAD,CAA7C,yCAAM2B,WAAN,eAAmBC,cAAnB,eACF;AACE,QAASC,OAAT,EAAiB,CAEbC,KAAK,gDAAyCJ,EAAzC,EAAgD,CACjDK,MAAM,CAAE,KADyC,CAEjDC,OAAO,CAAGP,IAFuC,CAGjDQ,IAAI,CAAC,MAH4C,CAAhD,CAAL,CAKCC,IALD,CAKM,SAACC,QAAD,CAAc,CACnB,GAAIA,QAAQ,CAACC,MAAT,EAAmB,GAAnB,EAA0BD,QAAQ,CAACC,MAAT,EAAmB,GAAjD,CAAsD,CAEnDb,YAAY,CAACc,KAAb,GACArB,cAAc,CAAC,EAAD,CAAd,CACAC,QAAQ,CAAC,GAAD,CAAR,CACF,CALD,IAKO,IAAIkB,QAAQ,CAACC,MAAT,EAAmB,GAAvB,CAA4B,CAChCpB,cAAc,CAAC,aAAD,CAAd,CACF,CACD,CAdD,EAeFC,QAAQ,CAAC,UAAD,CAAR,CACD,CAED,GAAMqB,UAAS,CAAG,QAAZA,UAAY,EAAK,CACnBnB,QAAQ,CAAC,CAACD,KAAF,CAAR,CACAY,KAAK,CAAC,iCAAmCP,YAAY,CAACC,OAAb,CAAqB,IAArB,CAApC,CAAgE,CACjEO,MAAM,CAAE,QADyD,CAEjEC,OAAO,CAAGP,IAFuD,CAGjEQ,IAAI,CAAC,MAH4D,CAAhE,CAAL,CAKCC,IALD,CAKM,SAACC,QAAD,CAAc,CAChB,GAAIA,QAAQ,CAACC,MAAT,EAAmB,GAAnB,EAA0BD,QAAQ,CAACC,MAAT,EAAmB,GAAjD,CAAsD,CAClDb,YAAY,CAACc,KAAb,GACArB,cAAc,CAAC,EAAD,CAAd,CACAC,QAAQ,CAAC,GAAD,CAAR,CACH,CAJD,IAIO,IAAIkB,QAAQ,CAACC,MAAT,EAAmB,GAAvB,CAA4B,CAC/BpB,cAAc,CAAC,aAAD,CAAd,CACH,CAFM,IAED,CACFA,cAAc,CAAC,eAAD,CAAd,CACAC,QAAQ,CAAC,UAAD,CAAR,CACH,CACJ,CAhBD,EAkBH,CApBD,CAsBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEAlB,SAAS,CAAC,UAAI,CACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAASwC,QAAT,EAAkB,CACdT,KAAK,yCAAkCJ,EAAlC,EAAyC,CAC1CK,MAAM,CAAE,KADkC,CAE1CC,OAAO,CAAGP,IAFgC,CAG1CQ,IAAI,CAAC,MAHqC,CAAzC,CAAL,CAKCC,IALD,CAKM,SAAAC,QAAQ,QAAIA,SAAQ,CAAC/B,IAAT,EAAJ,EALd,EAMC8B,IAND,CAMM,SAAAM,QAAQ,CAAI,CACdZ,cAAc,CAACY,QAAD,CAAd,CACH,CARD,EAUCN,IAVD,CAUM,SAACC,QAAD,CAAc,CACnB,GAAIA,QAAQ,CAACC,MAAT,GAAoB,GAAxB,CAA6B,CAC1BpB,cAAc,CAAC,EAAD,CAAd,CACF,CAFD,IAEO,IAAImB,QAAQ,CAACC,MAAT,CAAkB,GAAtB,CAA2B,CAC/BpB,cAAc,CAAC,aAAD,CAAd,CACF,CACD,CAhBD,EAiBCyB,KAjBD,CAiBO,SAAAC,CAAC,QAAIC,QAAO,CAACC,GAAR,CAAY,WAAaF,CAAzB,CAAJ,EAjBR,EAkBH,EACDH,OAAO,GACV,CAjCQ,CAiCN,EAjCM,CAAT,CAmCA,mBACA,mCACI,kCACI,aAAK,SAAS,CAAC,OAAf,wBACI,oCACI,kCACI,YAAK,SAAS,CAAG,WAAjB,CAA6B,GAAG,CAAGZ,WAAW,CAACkB,KAAZ,EAAqB,sFAAxD,CAAgJ,GAAG,CAAG,sBAAtJ,EADJ,EADJ,cAII,YAAK,SAAS,CAAC,YAAf,uBACI,KAAC,cAAD,EACI,QAAQ,CAAElB,WADd,EADJ,EAJJ,cASI,kCACI,YAAK,SAAS,CAAC,aAAf,uBACI,YAAI,IAAI,CAAG,SAAX,CAAqB,SAAS,CAAC,QAA/B,wBACI,WAAI,SAAS,CAAG,UAAhB,uBACI,KAAC,IAAD,EAAM,SAAS,CAAG,aAAlB,CAAiC,EAAE,CAAE,cAArC,CAAoD,EAAE,CAAG,UAAzD,CAAoE,cAAc,KAAlF,CAAyF,IAAI,CAAG,KAAhG,0BADJ,EADJ,cAII,WAAI,SAAS,CAAG,UAAhB,uBACI,KAAC,IAAD,EAAM,SAAS,CAAG,UAAlB,CAA8B,EAAE,CAAC,WAAjC,CAA6C,EAAE,CAAG,aAAlD,CAAgE,cAAc,KAA9E,CAAoF,IAAI,CAAG,GAA3F,CAA+F,IAAI,CAAG,KAAtG,sBADJ,EAJJ,cAOI,WAAI,SAAS,CAAG,UAAhB,uBACI,KAAC,IAAD,EAAM,SAAS,CAAG,QAAlB,CAA2B,EAAE,CAAG,GAAhC,CAAoC,OAAO,CAAEE,MAA7C,sBADJ,EAPJ,GADJ,EADJ,EATJ,GADJ,cA2BI,oCACI,eAAQ,SAAS,CAAG,cAApB,CAAmC,OAAO,CAAET,MAA5C,+BADJ,cAKI,MAAC,KAAD,EAAO,MAAM,CAAEF,KAAf,CAAsB,MAAM,CAAEE,MAA9B,wBACI,KAAC,WAAD,EAAa,MAAM,CAAEA,MAArB,+BADJ,cAEQ,KAAC,SAAD,iEAFR,cAKI,MAAC,WAAD,yBACI,KAAC,MAAD,EAAQ,KAAK,CAAC,QAAd,CAAuB,OAAO,CAAEkB,SAAhC,oBADJ,CAGc,GAHd,cAII,KAAC,MAAD,EAAQ,KAAK,CAAC,WAAd,CAA0B,OAAO,CAAElB,MAAnC,oBAJJ,GALJ,GALJ,GA3BJ,GADJ,EADJ,EADA,CAsDH,CAzKM"},"metadata":{},"sourceType":"module"}