{"ast":null,"code":"import _regeneratorRuntime from\"D:/MyProjects/Technomoles/LeisureGuruFE/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/MyProjects/Technomoles/LeisureGuruFE/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/MyProjects/Technomoles/LeisureGuruFE/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useContext,useEffect,useState}from\"react\";import{Rating}from\"./filters/Rating\";import{Activities}from\"./filters/Activities\";import{PlaceComponent}from\"./PlaceComponent\";import{Date}from\"./filters/Date\";import{AlertComponent}from\"./AlertComponent\";import{SearchContext}from\"./context/SearchContext\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var Main=function Main(props){var input=props.setSearchString;var _useState=useState(5),_useState2=_slicedToArray(_useState,2),rating=_useState2[0],setRating=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),date=_useState4[0],setDate=_useState4[1];var _useState5=useState(input),_useState6=_slicedToArray(_useState5,2),searchString=_useState6[0],setSearchString=_useState6[1];var _useState7=useState(new Array()),_useState8=_slicedToArray(_useState7,2),selectedActivities=_useState8[0],setSelectedActivities=_useState8[1];var searchContext=useContext(SearchContext);var credentials=btoa(localStorage.getItem(\"email\")+\":\"+localStorage.getItem(\"password\"));var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),info=_useState10[0],setInfo=_useState10[1];// create useState for info thet we GET from db\nuseEffect(function(){var getInformation=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var conn,getdata;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch('http://127.0.0.1:5000/homepage');case 2:conn=_context.sent;_context.next=5;return conn.json();case 5:getdata=_context.sent;setInfo(getdata);case 7:case\"end\":return _context.stop();}}},_callee);}));return function getInformation(){return _ref.apply(this,arguments);};}();getInformation();},[]);useEffect(function(){console.log(\"filter changed \"+rating+\", \"+date+\", \"+selectedActivities);console.log(credentials);var auth={\"Authorization\":\"Basic \".concat(credentials)};fetch('http://127.0.0.1:5000/filter',{method:'POST',headers:{'Authorization':\"Basic \".concat(credentials),'Content-Type':'application/json'},mode:'cors',body:JSON.stringify({rate:rating,activities:selectedActivities})}).then(function(response){if(response.status>=400){throw Error(400);}else{return response;}}).then(function(response){return response.json();}).then(function(jsonResponse){return setInfo(jsonResponse);}).catch(function(e){return console.log(\"failed: \"+e);});},[rating,date,selectedActivities]);useEffect(function(){console.log(\"input!\"+searchContext.searchString);fetch(\"http://127.0.0.1:5000/filter\",{method:'POST',headers:{'Authorization':\"Basic \".concat(credentials),'Content-Type':'application/json'},mode:'cors',body:JSON.stringify({search_box:searchContext.searchString})}).then(function(response){return response.json();}).then(function(respData){setInfo(respData);}).catch(function(e){return console.log(\"failed: \"+e);});},[searchContext.searchString]);return/*#__PURE__*/_jsxs(\"div\",{className:\"wrapper\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"left-panel\",children:[/*#__PURE__*/_jsx(Rating,{setRating:setRating}),/*#__PURE__*/_jsx(Activities,{selectedActivities:selectedActivities,setSelectedActivities:setSelectedActivities}),/*#__PURE__*/_jsx(Date,{date:date,setDate:setDate})]}),/*#__PURE__*/_jsx(\"div\",{className:\"main-panel\",children:/*#__PURE__*/_jsx(\"ul\",{style:{display:'block'},children:/*#__PURE__*/_jsx(\"li\",{style:{display:'inline-block'},children:info.map(function(infoIndex){return/*#__PURE__*/_jsx(PlaceComponent,{id:infoIndex.id,name:infoIndex.name,image:infoIndex.image,description:infoIndex.description,rate:infoIndex.rate,country:infoIndex.country,city:infoIndex.city,authorized:true});})})})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(AlertComponent,{authorized:true})})]});};","map":{"version":3,"names":["useContext","useEffect","useState","Rating","Activities","PlaceComponent","Date","AlertComponent","SearchContext","Main","props","input","setSearchString","rating","setRating","date","setDate","searchString","Array","selectedActivities","setSelectedActivities","searchContext","credentials","btoa","localStorage","getItem","info","setInfo","getInformation","fetch","conn","json","getdata","console","log","auth","method","headers","mode","body","JSON","stringify","rate","activities","then","response","status","Error","jsonResponse","catch","e","search_box","respData","display","map","infoIndex","id","name","image","description","country","city"],"sources":["D:/MyProjects/Technomoles/LeisureGuruFE/src/components/Main.js"],"sourcesContent":["import { useContext, useEffect, useState } from \"react\";\r\nimport { Rating } from \"./filters/Rating\";\r\nimport { Activities } from \"./filters/Activities\";\r\nimport {PlaceComponent} from \"./PlaceComponent\"\r\nimport { Date } from \"./filters/Date\";\r\n\r\nimport {AlertComponent} from \"./AlertComponent\"\r\nimport { SearchContext } from \"./context/SearchContext\";\r\n\r\nexport const Main = function (props) {\r\n    const input = props.setSearchString;\r\n    const [rating, setRating] = useState(5);\r\n    const [date, setDate] = useState(0);\r\n    const [searchString, setSearchString] = useState(input);\r\n    const [selectedActivities, setSelectedActivities] = useState(\r\n        new Array()\r\n    );\r\n    const searchContext = useContext(SearchContext);\r\n\r\n    var credentials = btoa(localStorage.getItem(\"email\") + \":\" + localStorage.getItem(\"password\"))\r\n\r\n\r\n    const [info, setInfo] = useState([]);// create useState for info thet we GET from db\r\n    useEffect(()=>{\r\n        const getInformation = async() => {\r\n            const conn = await fetch('http://127.0.0.1:5000/homepage'); //create connection with db\r\n            const getdata = await conn.json();            \r\n            setInfo(getdata);\r\n        }\r\n        getInformation();\r\n    },[]);\r\n\r\n    useEffect( () => {\r\n        console.log(\"filter changed \" + rating + \", \" + date + \", \" + selectedActivities);\r\n       \r\n        console.log(credentials)\r\n        var auth = { \"Authorization\" : `Basic ${credentials}` }\r\n        fetch('http://127.0.0.1:5000/filter', {\r\n            method: 'POST',\r\n            headers: { \r\n                        'Authorization' : `Basic ${credentials}`,\r\n                        'Content-Type': 'application/json'\r\n                      },\r\n            mode: 'cors',\r\n            body: JSON.stringify(\r\n                {\r\n                    rate: rating,\r\n                    activities: selectedActivities,\r\n                }\r\n            )\r\n        })\r\n        .then(response => {\r\n            if (response.status >= 400) {\r\n                throw Error(400);\r\n            } else {\r\n                return response;\r\n            }\r\n        })\r\n        .then(response => response.json())\r\n        .then(jsonResponse => {\r\n            return setInfo(jsonResponse);\r\n        })\r\n        .catch(e => console.log(\"failed: \" + e));\r\n    }, [rating, date, selectedActivities]\r\n\r\n    );\r\n\r\n    useEffect(() => {\r\n        console.log(\"input!\" + searchContext.searchString)\r\n        fetch(`http://127.0.0.1:5000/filter`, {\r\n            method: 'POST',\r\n                headers: { \r\n                            'Authorization' : `Basic ${credentials}`,\r\n                            'Content-Type': 'application/json'\r\n                        },\r\n                mode: 'cors',\r\n        \r\n            body: JSON.stringify(\r\n            {\r\n                search_box: searchContext.searchString\r\n            }\r\n            )\r\n        })\r\n            .then(response => response.json())\r\n            .then(respData => {\r\n                setInfo(respData)\r\n            })\r\n            .catch(e => console.log(\"failed: \" + e));\r\n    }, [searchContext.searchString]);\r\n\r\n    return (\r\n        <div className=\"wrapper\">\r\n            <div className=\"left-panel\">\r\n                <Rating setRating={setRating} />\r\n                <Activities selectedActivities={selectedActivities} setSelectedActivities={setSelectedActivities}/>\r\n                <Date date={date} setDate={setDate}/>\r\n\r\n            </div>\r\n            <div className=\"main-panel\">\r\n            <ul style = {{display:'block'}}>\r\n                <li style = {{display:'inline-block'}}>\r\n\r\n                {\r\n                    info.map((infoIndex)=>(\r\n                        <PlaceComponent \r\n                        id={infoIndex.id}\r\n                        name={infoIndex.name} \r\n                        image={infoIndex.image} \r\n                        description={infoIndex.description} \r\n                        rate={infoIndex.rate} \r\n                        country={infoIndex.country}\r\n                        city={infoIndex.city}\r\n                        authorized = {true}/>\r\n                    ))\r\n\r\n                }\r\n                    \r\n                </li>\r\n            </ul>\r\n            </div>\r\n            <div>\r\n                <AlertComponent authorized={true}/>\r\n            </div>\r\n            \r\n            \r\n        </div>\r\n    );\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}